<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">
            <!--JQuery and CSS local files -->
    <script src="./assets/js/lib/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./assets/css/style-index.css">
         <!-- Howler JS -->
    <script src="./assets/js/lib/howler.js"></script>
            <!--PaperJS  -->    
    <script type="text/javascript" src="./assets/js/lib/paper-full.js"></script>
        <!-- PaperJS and HowlerJS Script-->
    <script type="text/paperscript" canvas="myCanvas">
     ///////////////--HOWLERJS--/////////////////////////         
     var keyData = {
        q: {
            sound: new Howl({
              src: ['sounds/bubbles.mp3']
            }),
            color: '#1abc9c'
        },
        w: {
            sound: new Howl({
              src: ['sounds/clay.mp3']
            }),
            color: '#2ecc71'
        },
        e: {
            sound: new Howl({
              src: ['sounds/confetti.mp3']
            }),
            color: '#3498db'
        },
        r: {
            sound: new Howl({
              src: ['sounds/corona.mp3']
            }),
            color: '#9b59b6'
        },
            t: {
            sound: new Howl({
              src: ['sounds/dotted-spiral.mp3']
            }),
            color: '#34495e'
        },
        y: {
            sound: new Howl({
              src: ['sounds/flash-1.mp3']
            }),
            color: '#16a085'
        },
        u: {
            sound: new Howl({
              src: ['sounds/flash-2.mp3']
            }),
            color: '#27ae60'
        },
        i: {
            sound: new Howl({
              src: ['sounds/flash-3.mp3']
            }),
            color: '#2980b9'
        },
        o: {
            sound: new Howl({
                src: ['sounds/glimmer.mp3']
            }),
            color: '#8e44ad'
        },
        p: {
            sound: new Howl({
              src: ['sounds/moon.mp3']
            }),
            color: '#2c3e50'
        },
        a: {
            sound: new Howl({
              src: ['sounds/pinwheel.mp3']
            }),
            color: '#f1c40f'
        },
        s: {
            sound: new Howl({
              src: ['sounds/piston-1.mp3']
            }),
            color: '#e67e22'
        },
            d: {
            sound: new Howl({
              src: ['sounds/piston-2.mp3']
            }),
            color: '#e74c3c'
        },
        f: {
            sound: new Howl({
              src: ['sounds/prism-1.mp3']
            }),
            color: '#95a5a6'
        },
        g: {
            sound: new Howl({
              src: ['sounds/prism-2.mp3']
            }),
            color: '#f39c12'
        },
        h: {
            sound: new Howl({
              src: ['sounds/prism-3.mp3']
            }),
            color: '#d35400'
        },
        j: {
            sound: new Howl({
              src: ['sounds/splits.mp3']
            }),
            color: '#1abc9c'
        },
        k: {
            sound: new Howl({
              src: ['sounds/squiggle.mp3']
            }),
            color: '#2ecc71'
        },
        l: {
            sound: new Howl({
              src: ['sounds/strike.mp3']
            }),
            color: '#3498db'
        },
        z: {
            sound: new Howl({
              src: ['sounds/suspension.mp3']
            }),
            color: '#9b59b6'
        },
        x: {
            sound: new Howl({
              src: ['sounds/timer.mp3']
            }),
            color: '#34495e'
        },
        c: {
            sound: new Howl({
              src: ['sounds/ufo.mp3']
            }),
            color: '#16a085'
        },
        v: {
            sound: new Howl({
              src: ['sounds/veil.mp3']
            }),
            color: '#27ae60'
        },
        b: {
            sound: new Howl({
              src: ['sounds/wipe.mp3']
            }),
            color: '#2980b9'
        },
        n: {
            sound: new Howl({
                src: ['sounds/zig-zag.mp3']
            }),
            color: '#8e44ad'
        },
        m: {
            sound: new Howl({
              src: ['sounds/moon.mp3']
            }),
            color: '#2c3e50'
        }
    }
    var metData ={
        // Add 1-9 metronome 1->slower 10->faster
        1: {
            sound: new Howl({
              src: ['sounds/met1.mp3']
            }),
            color: '#2c3e50'
        },
        2: {
            sound: new Howl({
              src: ['sounds/met2.mp3']
            }),
            color: '#2c3e50'
        },
        3: {
            sound: new Howl({
              src: ['sounds/met3.mp3']
            }),
            color: '#2c3e50'
        },
        4: {
            sound: new Howl({
              src: ['sounds/met4.mp3']
            }),
            color: '#2c3e50'
        },
        5: {
            sound: new Howl({
              src: ['sounds/met5.mp3']
            }),
            color: '#2c3e50'
        },
        6: {
            sound: new Howl({
              src: ['sounds/met6.mp3']
            }),
            color: '#2c3e50'
        },
        7: {
            sound: new Howl({
              src: ['sounds/met7.mp3']
            }),
            color: '#2c3e50'
        },
        8: {
            sound: new Howl({
              src: ['sounds/met8.mp3']
            }),
            color: '#2c3e50'
        },
        9: {
            sound: new Howl({
              src: ['sounds/met9.mp3']
            }),
            color: '#2c3e50'
        },
        0: {
            
        }
    }

        ///////////////////MouseDrag animation////////////////////

        


      ///////////////////Key press Events////////////////////
        var circles = [];
        var clockWise = true;

        ////// numbers for metronome //////////
        function onKeyDown(event) {
            // Multiplying any point (x,y) by Point.random() returns a point in the range you gave
            // And by using view.size. if use resize screen, shape will ALWAYS appear in viewable area
                var maxPoint = new Point(view.size.width, view.size.height);
                var randomPoint = Point.random();
                var point = maxPoint * randomPoint; 
            
        ///////// letters for sounds //////////
        
            if(isNumber(event.key)){//function at end of script
                var metSound = metData[event.key].sound
                if(!metSound.playing()){
                    metSound.play();
                }
                else{
                    metSound.stop();
                }
                
            }
            else{
                //this ensures it only tries to create shape and get sound, if element is in our array
                if(keyData[event.key]){
                    
                    //returns random from 3 to 8 which will be the amount of sides to polygone rendered
                var randomSides = Math.floor(Math.random() * (8 - 3)) + 3;

                    var newShape = new Path.RegularPolygon(point, Number(randomSides), 500);
                    newShape.fillColor = keyData[event.key].color;
                    keyData[event.key].sound.play();
                    circles.push(newShape);
                //change direction of rotation at every keypress
                    clockWise = !clockWise;
                }
            }
        }

        /////// shapes animations /////////
        function onFrame(event) {
            for (var i = 0 ; i < circles.length ; i++){
                circles[i].fillColor.hue += 1;
                circles[i].scale(.9);

                if(clockWise){
                    circles[i].rotate(-5);
                }
                else{
                    circles[i].rotate(5);
                }
            }

        }

        function isNumber(str){
            if((str.charCodeAt(0)>=49) && (event.key <=58)){
                return true;
            }
            else{return false;}
        }

    </script>

    <title>JATACAP - Relax to your own sounds</title>
</head>
<body>
	<canvas id="myCanvas" resize></canvas>  

    <!-- <script type="text/javascript" src="assets/js/index.js"></script> -->
</body>
</html>